{
    "imports": [
        "github.com/project-flogo/flow",
        "github.com/project-flogo/contrib/activity/log",
        "github.com/project-flogo/flow/activity/subflow",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/cid",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/get",
        "github.com/project-flogo/contrib/activity/error",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/put",
        "github.com/project-flogo/contrib/activity/actreturn",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/delete",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/getbycompositekey",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/gethistory",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/query",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/trigger/transaction",
        "github.com/project-flogo/contrib/function/array",
        "github.com/project-flogo/contrib/function/coerce",
        "github.com/project-flogo/contrib/function/string",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/function/float"
    ],
    "name": "iou",
    "description": " ",
    "version": "1.1.0",
    "type": "flogo:app",
    "appModel": "1.1.1",
    "feVersion": "2.8.0",
    "triggers": [
        {
            "ref": "#transaction",
            "name": "fabric-transaction",
            "description": "initialize a user account",
            "settings": {},
            "id": "FabricTransaction",
            "handlers": [
                {
                    "description": "initialize a user account",
                    "settings": {
                        "name": "createAccount",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:createAccount"
                        },
                        "input": {
                            "parameters": "=$.parameters"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\n    \"name\": \"\",\n    \"bank\": \"\",\n    \"balance\": 0\n}"
                            }
                        }
                    }
                },
                {
                    "description": "issue a new IOU to a customer",
                    "settings": {
                        "name": "issue",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:issue"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "txID": "=$.txID",
                            "txTime": "=$.txTime"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\n    \"bank\": \"\",\n    \"owner\": \"\",\n    \"amount\": 0\n}"
                            }
                        }
                    }
                },
                {
                    "description": "buy an existing IOU issued by another bank",
                    "settings": {
                        "name": "buy",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:buy"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "txTime": "=$.txTime",
                            "txID": "=$.txID"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"iou\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"bank\": \"\",\n    \"owner\": \"\",\n    \"iou\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "transfer an IOU to a new owner",
                    "settings": {
                        "name": "transfer",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:transfer"
                        },
                        "input": {
                            "parameters": "=$.parameters"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"newOwner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"id\": \"\",\n    \"newOwner\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "exchange IOU to an equivalent IOU of specified bank's currency",
                    "settings": {
                        "name": "exchange",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:exchange"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "txID": "=$.txID",
                            "txTime": "=$.txTime"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"id\": \"\",\n    \"bank\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "redeem an IOU at the issuer bank",
                    "settings": {
                        "name": "redeem",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:redeem"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "txTime": "=$.txTime",
                            "txID": "=$.txID"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"id\": \"\",\n    \"bank\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "retrieves all accounts of a specified bank",
                    "settings": {
                        "name": "getBankAccounts",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:getBankAccounts"
                        },
                        "input": {
                            "parameters": {
                                "mapping": {
                                    "bank": "=$.parameters.bank"
                                }
                            }
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns,index)": {
                                        "key": "=$loop.key",
                                        "value": "=$loop.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"bank\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "retrieves all transactions of an account name in a specified bank",
                    "settings": {
                        "name": "getAccountTransactions",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:getAccountTransactions"
                        },
                        "input": {
                            "parameters": "=$.parameters"
                        },
                        "output": {
                            "status": "=$.status",
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns,index)": {
                                        "key": "=$loop.key",
                                        "value": "=$loop.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"name\": \"\",\n    \"bank\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "retrieves history of an IOU",
                    "settings": {
                        "name": "getIOUHistory",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:getIOUHistory"
                        },
                        "input": {
                            "parameters": {
                                "mapping": {
                                    "id": "=$.parameters.id"
                                }
                            }
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns,index)": {
                                        "txTime": "=$loop.txTime",
                                        "isDeleted": "=$loop.isDeleted",
                                        "value": "=$loop.value",
                                        "txID": "=$loop.txID"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"isDeleted\":{\"type\":\"boolean\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"txID\": \"\",\n    \"txTime\": \"\",\n    \"isDeleted\": false,\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"id\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "find an IOU matching issuer, owner, and amount",
                    "settings": {
                        "name": "queryIOUByAmount",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:queryIOUByAmount"
                        },
                        "input": {
                            "parameters": "=$.parameters"
                        },
                        "output": {
                            "status": "=$.status",
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns,index)": {
                                        "key": "=$loop.key",
                                        "value": "=$loop.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\n    \"issuer\": \"\",\n    \"owner\": \"\",\n    \"amount\": 0\n}"
                            }
                        }
                    }
                },
                {
                    "description": "create or find IOU equivalent to specified amount in the currency of a receiver bank, returns the IOU owned by the sender.",
                    "settings": {
                        "name": "send",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:send"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "txTime": "=$.txTime",
                            "txID": "=$.txID"
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"sender\":{\"type\":\"string\"},\"senderBank\":{\"type\":\"string\"},\"receiverBank\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\n    \"sender\": \"\",\n    \"senderBank\": \"\",\n    \"receiverBank\": \"\",\n    \"amount\": 0\n}"
                            }
                        }
                    }
                },
                {
                    "description": "",
                    "settings": {
                        "name": "getIOUByIssuer",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:getIOUByIssuer"
                        },
                        "input": {
                            "parameters": {
                                "mapping": {
                                    "issuer": "=$.parameters.issuer"
                                }
                            }
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns,index)": {
                                        "key": "=$loop.key",
                                        "value": "=$loop.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"issuer\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "",
                    "settings": {
                        "name": "getIOUByOwner",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:getIOUByOwner"
                        },
                        "input": {
                            "parameters": {
                                "mapping": {
                                    "owner": "=$.parameters.owner"
                                }
                            }
                        },
                        "output": {
                            "status": "=$.status",
                            "message": "=$.message",
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns,index)": {
                                        "key": "=$loop.key",
                                        "value": "=$loop.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "message": "",
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"owner\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"owner\": \"\"\n}"
                            }
                        }
                    }
                }
            ]
        }
    ],
    "resources": [
        {
            "id": "flow:createAccount",
            "data": {
                "name": "createAccount",
                "description": "initialize a user account",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "BankConfig",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "BankConfig",
                        "to": "Log4",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Log4",
                        "to": "Cid",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Cid",
                        "to": "Log3",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "Log3",
                        "to": "Get",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Cid].attrs.bank == $flow.parameters.bank && $activity[Cid].attrs.admin == \"true\""
                    },
                    {
                        "id": 6,
                        "from": "Get",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 7,
                        "from": "Log1",
                        "to": "DuplicateError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200"
                    },
                    {
                        "id": 8,
                        "from": "Log1",
                        "to": "Put",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code != 200"
                    },
                    {
                        "id": 9,
                        "from": "Put",
                        "to": "Log2",
                        "type": "default"
                    },
                    {
                        "id": 10,
                        "from": "Log2",
                        "to": "Return",
                        "type": "default"
                    },
                    {
                        "id": 11,
                        "from": "Log3",
                        "to": "NotAuthorizedError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Cid].attrs.bank != $flow.parameters.bank || $activity[Cid].attrs.admin != \"true\""
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[createAccount] \", $flow.parameters.name, \" bank: \", $flow.parameters.bank, \" balance: \", coerce.toString($flow.parameters.balance))",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log4",
                        "name": "Log4",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"acct: \", $activity[BankConfig].acctCollection, \" txn: \", $activity[BankConfig].acctCollection, \" currency: \", $activity[BankConfig].currency, \" rate: \", coerce.toString(float.float64($activity[BankConfig].exchangeRate, 3)))",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Cid",
                        "name": "Cid",
                        "description": "",
                        "activity": {
                            "ref": "#cid",
                            "schemas": {
                                "output": {
                                    "attrs": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"admin\":{\"type\":\"string\"},\"alias\":{\"type\":\"string\"},\"email\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\",\n    \"admin\": \"\",\n    \"alias\": \"\",\n    \"email\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log3",
                        "name": "Log3",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"CID: \", $activity[Cid].name, \" bank=\", $activity[Cid].attrs.bank, \" admin=\", $activity[Cid].attrs.admin, \" alias=\", $activity[Cid].attrs.alias)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Get",
                        "name": "Get",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.name",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection"
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET: \", $activity[Get].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "DuplicateError",
                        "name": "DuplicateError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Account \", $activity[Get].key, \" already exists\")"
                            }
                        }
                    },
                    {
                        "id": "Put",
                        "name": "Put",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$flow.parameters.name",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection",
                                "keyType": "accountKey",
                                "compositeKeys": "{\n  \"bank~name\": [\n    \"bank\",\n    \"name\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "name": "=$flow.parameters.name",
                                        "bank": "=$flow.parameters.bank",
                                        "balance": "=$flow.parameters.balance",
                                        "currency": "=$activity[BankConfig].currency"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log2",
                        "name": "Log2",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT: \", $activity[Put].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[Put].code",
                                    "message": "=$activity[Put].message",
                                    "returns": "=$activity[Put].result"
                                }
                            }
                        }
                    },
                    {
                        "id": "NotAuthorizedError",
                        "name": "NotAuthorizedError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"User \", $activity[Cid].name, \" not authorized to create account for bank \", $flow.parameters.bank)"
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:bankConfig",
            "data": {
                "name": "bankConfig",
                "description": "returns bank configuration data",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "ReturnUSD",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$flow.bank == \"USDBank\""
                    },
                    {
                        "id": 2,
                        "from": "Log",
                        "to": "ReturnEUR",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$flow.bank == \"EURBank\""
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[bankConfig] \", $flow.bank)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "ReturnUSD",
                        "name": "ReturnUSD",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "exchangeRate": "=$property[\"currencies.ExchangeRate\"]",
                                    "acctCollection": "=$property[\"collections.USDBankAccounts\"]",
                                    "txnCollection": "=$property[\"collections.USDBankTransactions\"]",
                                    "currency": "=$property[\"currencies.USDBankCurrency\"]"
                                }
                            }
                        }
                    },
                    {
                        "id": "ReturnEUR",
                        "name": "ReturnEUR",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "exchangeRate": "=1 / $property[\"currencies.ExchangeRate\"]",
                                    "acctCollection": "=$property[\"collections.EURBankAccounts\"]",
                                    "txnCollection": "=$property[\"collections.EURBankTransactions\"]",
                                    "currency": "=$property[\"currencies.EURBankCurrency\"]"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "bank",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "currency",
                            "type": "string"
                        },
                        {
                            "name": "acctCollection",
                            "type": "string"
                        },
                        {
                            "name": "txnCollection",
                            "type": "string"
                        },
                        {
                            "name": "exchangeRate",
                            "type": "float64"
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\n    \"bank\": \"\"\n}",
                        "output": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                    }
                }
            }
        },
        {
            "id": "flow:issue",
            "data": {
                "name": "issue",
                "description": "issue a new IOU to a customer",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "BankConfig",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "BankConfig",
                        "to": "Cid",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Cid",
                        "to": "NotOwnerError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Cid].attrs.alias != $flow.parameters.owner"
                    },
                    {
                        "id": 4,
                        "from": "Cid",
                        "to": "Get",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Cid].attrs.alias == $flow.parameters.owner"
                    },
                    {
                        "id": 5,
                        "from": "Get",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "Log1",
                        "to": "NoAccountError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code != 200"
                    },
                    {
                        "id": 7,
                        "from": "Log1",
                        "to": "NoFundError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Get].result.balance < $flow.parameters.amount"
                    },
                    {
                        "id": 8,
                        "from": "Log1",
                        "to": "PutAcct",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Get].result.balance >= $flow.parameters.amount"
                    },
                    {
                        "id": 9,
                        "from": "PutAcct",
                        "to": "PutIOU",
                        "type": "default"
                    },
                    {
                        "id": 10,
                        "from": "PutIOU",
                        "to": "Log2",
                        "type": "default"
                    },
                    {
                        "id": 11,
                        "from": "Log2",
                        "to": "PutOwnerTx",
                        "type": "default"
                    },
                    {
                        "id": 12,
                        "from": "PutOwnerTx",
                        "to": "PutBankTx",
                        "type": "default"
                    },
                    {
                        "id": 13,
                        "from": "PutBankTx",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[issue] \", $flow.parameters.bank, \" to \", $flow.parameters.owner, \" amount: \", coerce.toString($flow.parameters.amount))",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Cid",
                        "name": "Cid",
                        "description": "",
                        "activity": {
                            "ref": "#cid",
                            "schemas": {
                                "output": {
                                    "attrs": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alias\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"alias\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "NotOwnerError",
                        "name": "NotOwnerError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"User \", $activity[Cid].name, \" is not the IOU owner \", $flow.parameters.owner)"
                            }
                        }
                    },
                    {
                        "id": "Get",
                        "name": "Get",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.owner",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection"
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET account: \", $activity[Get].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NoAccountError",
                        "name": "NoAccountError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Account \", $flow.parameters.owner, \" does not exist in bank \", $flow.parameters.bank)"
                            }
                        }
                    },
                    {
                        "id": "NoFundError",
                        "name": "NoFundError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Account \", $flow.parameters.owner, \" does not have enough fund\")"
                            }
                        }
                    },
                    {
                        "id": "PutAcct",
                        "name": "PutAcct",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$activity[Get].key",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection",
                                "keyType": "",
                                "compositeKeys": "",
                                "data": {
                                    "mapping": {
                                        "name": "=$activity[Get].result.name",
                                        "bank": "=$activity[Get].result.bank",
                                        "currency": "=$activity[Get].result.currency",
                                        "balance": "=$activity[Get].result.balance - $flow.parameters.amount"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "PutIOU",
                        "name": "PutIOU",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$flow.txID",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "keyType": "iouKey",
                                "compositeKeys": "{\n  \"issuer~id\": [\n    \"issuer\",\n    \"id\"\n  ],\n  \"issueDate~id\": [\n    \"issueDate\",\n    \"id\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "id": "=$flow.txID",
                                        "issuer": "=$flow.parameters.bank",
                                        "amount": "=$flow.parameters.amount",
                                        "currency": "=$activity[BankConfig].currency",
                                        "issueDate": "=$flow.txTime",
                                        "owner": "=$flow.parameters.owner"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log2",
                        "name": "Log2",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT IOU: \", $activity[PutIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "PutOwnerTx",
                        "name": "PutOwnerTx",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.parameters.owner)",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "keyType": "transactionKey",
                                "compositeKeys": "{\n  \"account\": [\n    \"account\"\n  ],\n  \"iouRef\": [\n    \"iouRef\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txID": "=$flow.txID",
                                        "txTime": "=$flow.txTime",
                                        "account": "=$flow.parameters.owner",
                                        "amount": "=0 - $flow.parameters.amount",
                                        "iouRef": "=$activity[PutIOU].key"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "PutBankTx",
                        "name": "PutBankTx",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.parameters.bank)",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "keyType": "transactionKey",
                                "compositeKeys": "{\n  \"account\": [\n    \"account\"\n  ],\n  \"iouRef\": [\n    \"iouRef\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txID": "=$flow.txID",
                                        "txTime": "=$flow.txTime",
                                        "account": "=$flow.parameters.bank",
                                        "amount": "=$flow.parameters.amount",
                                        "iouRef": "=$activity[PutIOU].key"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[PutIOU].code",
                                    "message": "=$activity[PutIOU].message",
                                    "returns": "=$activity[PutIOU].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:buy",
            "data": {
                "name": "buy",
                "description": "buy an existing IOU issued by another bank",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "BankConfig",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "BankConfig",
                        "to": "GetIOU",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "GetIOU",
                        "to": "Log3",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Log3",
                        "to": "NoIOUError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code != 200"
                    },
                    {
                        "id": 5,
                        "from": "Log3",
                        "to": "BankOwnedError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code == 200 && $activity[GetIOU].result.owner != $flow.parameters.bank"
                    },
                    {
                        "id": 6,
                        "from": "Log3",
                        "to": "Cid",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code == 200 && $activity[GetIOU].result.owner == $flow.parameters.bank"
                    },
                    {
                        "id": 7,
                        "from": "Cid",
                        "to": "NotOwnerError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Cid].attrs.alias != $flow.parameters.owner"
                    },
                    {
                        "id": 8,
                        "from": "Cid",
                        "to": "Get",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Cid].attrs.alias == $flow.parameters.owner"
                    },
                    {
                        "id": 9,
                        "from": "Get",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 10,
                        "from": "Log1",
                        "to": "NoAccountError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code != 200"
                    },
                    {
                        "id": 11,
                        "from": "Log1",
                        "to": "NoFundError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Get].result.balance < $activity[GetIOU].result.amount*$activity[BankConfig].exchangeRate"
                    },
                    {
                        "id": 12,
                        "from": "Log1",
                        "to": "PutAcct",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Get].result.balance >= $activity[GetIOU].result.amount*$activity[BankConfig].exchangeRate"
                    },
                    {
                        "id": 13,
                        "from": "PutAcct",
                        "to": "PutIOU",
                        "type": "default"
                    },
                    {
                        "id": 14,
                        "from": "PutIOU",
                        "to": "Log2",
                        "type": "default"
                    },
                    {
                        "id": 15,
                        "from": "Log2",
                        "to": "PutOwnerTx",
                        "type": "default"
                    },
                    {
                        "id": 16,
                        "from": "PutOwnerTx",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[buy] \", $flow.parameters.iou, \" from bank \", $flow.parameters.bank, \" owner: \", $flow.parameters.owner)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetIOU",
                        "name": "GetIOU",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.iou",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": ""
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log3",
                        "name": "Log3",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET IOU: \", $activity[GetIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NoIOUError",
                        "name": "NoIOUError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Failed to retrieve IOU: \", $activity[GetIOU].message)"
                            }
                        }
                    },
                    {
                        "id": "BankOwnedError",
                        "name": "BankOwnedError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"IOU owner \", $activity[GetIOU].result.owner, \" is not the bank \", $flow.parameters.bank)"
                            }
                        }
                    },
                    {
                        "id": "Cid",
                        "name": "Cid",
                        "description": "",
                        "activity": {
                            "ref": "#cid",
                            "schemas": {
                                "output": {
                                    "attrs": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alias\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"alias\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "NotOwnerError",
                        "name": "NotOwnerError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"User \", $activity[Cid].name, \" is not the IOU owner \", $flow.parameters.owner)"
                            }
                        }
                    },
                    {
                        "id": "Get",
                        "name": "Get",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.owner",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection"
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET account: \", $activity[Get].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NoAccountError",
                        "name": "NoAccountError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Account \", $flow.parameters.owner, \" does not exist in bank \", $flow.parameters.bank)"
                            }
                        }
                    },
                    {
                        "id": "NoFundError",
                        "name": "NoFundError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Account \", $flow.parameters.owner, \" does not have enough fund\")"
                            }
                        }
                    },
                    {
                        "id": "PutAcct",
                        "name": "PutAcct",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$activity[Get].key",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection",
                                "keyType": "",
                                "compositeKeys": "",
                                "data": {
                                    "mapping": {
                                        "name": "=$activity[Get].result.name",
                                        "bank": "=$activity[Get].result.bank",
                                        "currency": "=$activity[Get].result.currency",
                                        "balance": "=$activity[Get].result.balance - float.float64($activity[GetIOU].result.amount*$activity[BankConfig].exchangeRate, 2)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "PutIOU",
                        "name": "PutIOU",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$activity[GetIOU].key",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "keyType": "",
                                "compositeKeys": "{\n  \"issuer~id\": [\n    \"issuer\",\n    \"id\"\n  ],\n  \"issueDate~id\": [\n    \"issueDate\",\n    \"id\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "id": "=$activity[GetIOU].result.id",
                                        "amount": "=$activity[GetIOU].result.amount",
                                        "issuer": "=$activity[GetIOU].result.issuer",
                                        "currency": "=$activity[GetIOU].result.currency",
                                        "issueDate": "=$activity[GetIOU].result.issueDate",
                                        "owner": "=$flow.parameters.owner"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log2",
                        "name": "Log2",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT IOU: \", $activity[PutIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "PutOwnerTx",
                        "name": "PutOwnerTx",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.parameters.owner)",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "keyType": "transactionKey",
                                "compositeKeys": "{\n  \"account\": [\n    \"account\"\n  ],\n  \"iouRef\": [\n    \"iouRef\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txID": "=$flow.txID",
                                        "txTime": "=$flow.txTime",
                                        "account": "=$flow.parameters.owner",
                                        "amount": "=0 - float.float64($activity[GetIOU].result.amount*$activity[BankConfig].exchangeRate, 2)",
                                        "iouRef": "=$activity[PutIOU].key"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[PutIOU].code",
                                    "message": "=$activity[PutIOU].message",
                                    "returns": "=$activity[PutIOU].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"iou\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"iou\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:transfer",
            "data": {
                "name": "transfer",
                "description": "transfer an IOU to a new owner",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "Cid",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Cid",
                        "to": "Get",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Get",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Log1",
                        "to": "NotExistError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code != 200"
                    },
                    {
                        "id": 5,
                        "from": "Log1",
                        "to": "NotOwnerError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Cid].attrs.alias != $activity[Get].result.owner"
                    },
                    {
                        "id": 6,
                        "from": "Log1",
                        "to": "Put",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Get].result.owner == $activity[Cid].attrs.alias"
                    },
                    {
                        "id": 7,
                        "from": "Put",
                        "to": "Log2",
                        "type": "default"
                    },
                    {
                        "id": 8,
                        "from": "Log2",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[transfer] \", $flow.parameters.id, \" new owner: \", $flow.parameters.newOwner)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Cid",
                        "name": "Cid",
                        "description": "",
                        "activity": {
                            "ref": "#cid",
                            "schemas": {
                                "output": {
                                    "attrs": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alias\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"alias\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Get",
                        "name": "Get",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.id",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": ""
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET IOU: \", $activity[Get].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NotExistError",
                        "name": "NotExistError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Failed to find IOU: \", $activity[Get].message)"
                            }
                        }
                    },
                    {
                        "id": "NotOwnerError",
                        "name": "NotOwnerError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"User \", $activity[Cid].name, \" is not the IOU owner \", $activity[Get].result.owner)"
                            }
                        }
                    },
                    {
                        "id": "Put",
                        "name": "Put",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$activity[Get].key",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "keyType": "",
                                "compositeKeys": "",
                                "data": {
                                    "mapping": {
                                        "id": "=$activity[Get].result.id",
                                        "issuer": "=$activity[Get].result.issuer",
                                        "amount": "=$activity[Get].result.amount",
                                        "currency": "=$activity[Get].result.currency",
                                        "issueDate": "=$activity[Get].result.issueDate",
                                        "owner": "=$flow.parameters.newOwner"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log2",
                        "name": "Log2",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT: \", $activity[Put].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[Put].code",
                                    "message": "=$activity[Put].message",
                                    "returns": "=$activity[Put].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"newOwner\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction2\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"newOwner\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:exchange",
            "data": {
                "name": "exchange",
                "description": "exchange IOU to an equivalent IOU of specified bank's currency",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "Cid",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Cid",
                        "to": "BankConfig",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "BankConfig",
                        "to": "Get",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Get",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "Log1",
                        "to": "NotExistError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code != 200"
                    },
                    {
                        "id": 6,
                        "from": "Log1",
                        "to": "NotOwnerError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Cid].attrs.alias != $activity[Get].result.owner"
                    },
                    {
                        "id": 7,
                        "from": "Log1",
                        "to": "SameCurrencyError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[Get].result.currency == $activity[BankConfig].currency"
                    },
                    {
                        "id": 8,
                        "from": "Log1",
                        "to": "PutBank",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[Get].code == 200 && $activity[BankConfig].currency != $activity[Get].result.currency && $activity[Cid].attrs.alias == $activity[Get].result.owner"
                    },
                    {
                        "id": 9,
                        "from": "PutBank",
                        "to": "PutOwner",
                        "type": "default"
                    },
                    {
                        "id": 10,
                        "from": "PutOwner",
                        "to": "Log2",
                        "type": "default"
                    },
                    {
                        "id": 11,
                        "from": "Log2",
                        "to": "PutBankTx",
                        "type": "default"
                    },
                    {
                        "id": 12,
                        "from": "PutBankTx",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[exchange] \", $flow.parameters.id, \" at bank \", $flow.parameters.bank)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Cid",
                        "name": "Cid",
                        "description": "",
                        "activity": {
                            "ref": "#cid",
                            "schemas": {
                                "output": {
                                    "attrs": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alias\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"alias\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Get",
                        "name": "Get",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.id",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": ""
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET IOU: \", $activity[Get].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NotExistError",
                        "name": "NotExistError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Failedd to find IOU: \", $activity[Get].message)"
                            }
                        }
                    },
                    {
                        "id": "NotOwnerError",
                        "name": "NotOwnerError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"User \", $activity[Cid].name, \" is not IOU owner \", $activity[Get].result.owner)"
                            }
                        }
                    },
                    {
                        "id": "SameCurrencyError",
                        "name": "SameCurrencyError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"IOU currency \", $activity[Get].result.currency, \" is the same as bank's currency \", $activity[BankConfig].currency)"
                            }
                        }
                    },
                    {
                        "id": "PutBank",
                        "name": "PutBank",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$activity[Get].key",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "keyType": "",
                                "compositeKeys": "",
                                "data": {
                                    "mapping": {
                                        "id": "=$activity[Get].result.id",
                                        "issuer": "=$activity[Get].result.issuer",
                                        "amount": "=$activity[Get].result.amount",
                                        "currency": "=$activity[Get].result.currency",
                                        "issueDate": "=$activity[Get].result.issueDate",
                                        "owner": "=$flow.parameters.bank"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "PutOwner",
                        "name": "PutOwner",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$flow.txID",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "keyType": "iouKey",
                                "compositeKeys": "{\n  \"issuer~id\": [\n    \"issuer\",\n    \"id\"\n  ],\n  \"issueDate~id\": [\n    \"issueDate\",\n    \"id\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "id": "=$flow.txID",
                                        "issuer": "=$flow.parameters.bank",
                                        "amount": "=float.float64($activity[Get].result.amount * $activity[BankConfig].exchangeRate, 2)",
                                        "currency": "=$activity[BankConfig].currency",
                                        "issueDate": "=$flow.txTime",
                                        "owner": "=$activity[Get].result.owner"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log2",
                        "name": "Log2",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT new IOU: \", $activity[PutOwner].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "PutBankTx",
                        "name": "PutBankTx",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.parameters.bank)",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "keyType": "transactionKey",
                                "compositeKeys": "{\n  \"account\": [\n    \"account\"\n  ],\n  \"iouRef\": [\n    \"iouRef\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txID": "=$flow.txID",
                                        "txTime": "=$flow.txTime",
                                        "account": "=$flow.parameters.bank",
                                        "amount": "=$activity[PutOwner].result.amount",
                                        "iouRef": "=$activity[PutOwner].key"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[PutOwner].code",
                                    "message": "=$activity[PutOwner].message",
                                    "returns": "=$activity[PutOwner].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction3\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:redeem",
            "data": {
                "name": "redeem",
                "description": "redeem an IOU at the issuer bank",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "Cid",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Cid",
                        "to": "GetIOU",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "GetIOU",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Log1",
                        "to": "NoIOUError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code != 200"
                    },
                    {
                        "id": 5,
                        "from": "Log1",
                        "to": "NotIssuerError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code == 200 && $activity[GetIOU].result.issuer != $flow.parameters.bank"
                    },
                    {
                        "id": 6,
                        "from": "Log1",
                        "to": "NotOwnerError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code == 200 && $activity[GetIOU].result.owner != $activity[Cid].attrs.alias"
                    },
                    {
                        "id": 7,
                        "from": "Log1",
                        "to": "BankConfig",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetIOU].code == 200 && $activity[GetIOU].result.issuer == $flow.parameters.bank && $activity[GetIOU].result.owner == $activity[Cid].attrs.alias"
                    },
                    {
                        "id": 8,
                        "from": "BankConfig",
                        "to": "GetAcct",
                        "type": "default"
                    },
                    {
                        "id": 9,
                        "from": "GetAcct",
                        "to": "Log2",
                        "type": "default"
                    },
                    {
                        "id": 10,
                        "from": "Log2",
                        "to": "NoAcctError",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetAcct].code != 200"
                    },
                    {
                        "id": 11,
                        "from": "Log2",
                        "to": "Delete",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[GetAcct].code == 200"
                    },
                    {
                        "id": 12,
                        "from": "Delete",
                        "to": "PutAcct",
                        "type": "default"
                    },
                    {
                        "id": 13,
                        "from": "PutAcct",
                        "to": "Log3",
                        "type": "default"
                    },
                    {
                        "id": 14,
                        "from": "Log3",
                        "to": "PutOwnerTx",
                        "type": "default"
                    },
                    {
                        "id": 15,
                        "from": "PutOwnerTx",
                        "to": "PutBankTx",
                        "type": "default"
                    },
                    {
                        "id": 16,
                        "from": "PutBankTx",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[redeem] \", $flow.parameters.id, \" at bank \", $flow.parameters.bank)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Cid",
                        "name": "Cid",
                        "description": "",
                        "activity": {
                            "ref": "#cid",
                            "schemas": {
                                "output": {
                                    "attrs": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alias\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"alias\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetIOU",
                        "name": "GetIOU",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$flow.parameters.id",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": ""
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET IOU: \", $activity[GetIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NoIOUError",
                        "name": "NoIOUError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Failed to find IOU: \", $activity[GetIOU].message)"
                            }
                        }
                    },
                    {
                        "id": "NotIssuerError",
                        "name": "NotIssuerError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"IOU issuer \", $activity[GetIOU].result.issuer, \" is not the bank \", $flow.parameters.bank)"
                            }
                        }
                    },
                    {
                        "id": "NotOwnerError",
                        "name": "NotOwnerError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"User \", $activity[Cid].name, \" is not IOU owner \", $activity[GetIOU].result.owner)"
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetAcct",
                        "name": "GetAcct",
                        "description": "",
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "key": "=$activity[GetIOU].result.owner",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection"
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log2",
                        "name": "Log2",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET account: \", $activity[GetAcct].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "NoAcctError",
                        "name": "NoAcctError",
                        "description": "",
                        "activity": {
                            "ref": "#error",
                            "input": {
                                "message": "=string.concat(\"Failed to find owner account: \", $activity[GetAcct].message)"
                            }
                        }
                    },
                    {
                        "id": "Delete",
                        "name": "Delete",
                        "description": "",
                        "activity": {
                            "ref": "#delete",
                            "input": {
                                "key": "=$flow.parameters.id",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "keysOnly": false,
                                "keyType": "iouKey",
                                "compositeKeys": "{\n  \"issuer~id\": [\n    \"issuer\",\n    \"id\"\n  ],\n  \"issueDate~id\": [\n    \"issueDate\",\n    \"id\"\n  ]\n}"
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"id\": \"\",\n  \"issuer\": \"\",\n  \"amount\": 0,\n  \"currency\": \"\",\n  \"issueDate\": \"\",\n  \"owner\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "PutAcct",
                        "name": "PutAcct",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=$activity[GetAcct].key",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection",
                                "keyType": "",
                                "compositeKeys": "",
                                "data": {
                                    "mapping": {
                                        "name": "=$activity[GetAcct].result.name",
                                        "bank": "=$activity[GetAcct].result.bank",
                                        "currency": "=$activity[GetAcct].result.currency",
                                        "balance": "=$activity[GetAcct].result.balance + $activity[GetIOU].result.amount"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"name\": \"\",\n  \"bank\": \"\",\n  \"balance\": 0,\n  \"currency\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log3",
                        "name": "Log3",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT account: \", $activity[PutAcct].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "PutOwnerTx",
                        "name": "PutOwnerTx",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $activity[GetAcct].result.name)",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "keyType": "transactionKey",
                                "compositeKeys": "{\n  \"account\": [\n    \"account\"\n  ],\n  \"iouRef\": [\n    \"iouRef\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txID": "=$flow.txID",
                                        "txTime": "=$flow.txTime",
                                        "account": "=$activity[GetAcct].key",
                                        "amount": "=$activity[GetIOU].result.amount",
                                        "iouRef": "=$activity[GetIOU].key"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "PutBankTx",
                        "name": "PutBankTx",
                        "description": "",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.parameters.bank)",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "keyType": "transactionKey",
                                "compositeKeys": "{\n  \"account\": [\n    \"account\"\n  ],\n  \"iouRef\": [\n    \"iouRef\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "account": "=$flow.parameters.bank",
                                        "txTime": "=$flow.txTime",
                                        "amount": "=0 - $activity[GetIOU].result.amount",
                                        "iouRef": "=$activity[GetIOU].key",
                                        "txID": "=$flow.txID"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txID\": \"\",\n  \"txTime\": \"\",\n  \"account\": \"\",\n  \"amount\": 0,\n  \"iouRef\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[PutAcct].code",
                                    "message": "=$activity[PutAcct].message",
                                    "returns": "=$activity[PutAcct].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction4\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:getBankAccounts",
            "data": {
                "name": "getBankAccounts",
                "description": "retrieves all accounts of a specified bank",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "BankConfig",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "BankConfig",
                        "to": "GetByCompositeKey",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "GetByCompositeKey",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[getBankAccounts] \", $flow.parameters.bank)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetByCompositeKey",
                        "name": "GetByCompositeKey",
                        "description": "",
                        "activity": {
                            "ref": "#getbycompositekey",
                            "input": {
                                "keyName": "bank~name",
                                "usePagination": false,
                                "pageSize": 0,
                                "start": "",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Account",
                                "privateCollection": "=$activity[BankConfig].acctCollection",
                                "attributes": {
                                    "mapping": {
                                        "bank": "=$flow.parameters.bank"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "attributes": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"bank\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true}]"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET by bank~name composite key: \", $activity[GetByCompositeKey].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[GetByCompositeKey].code",
                                    "message": "=$activity[GetByCompositeKey].message",
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[GetByCompositeKey].result,index)": {
                                                "key": "=$loop.key",
                                                "value": "=$loop.value"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"bank\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction6\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"},\"balance\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:getAccountTransactions",
            "data": {
                "name": "getAccountTransactions",
                "description": "retrieves all transactions of an account name in a specified bank",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "BankConfig",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "BankConfig",
                        "to": "GetByCompositeKey",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "GetByCompositeKey",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[getAccountTransactions] \", $flow.parameters.name, \" in bank \", $flow.parameters.bank)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "BankConfig",
                        "name": "BankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.bank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetByCompositeKey",
                        "name": "GetByCompositeKey",
                        "description": "",
                        "activity": {
                            "ref": "#getbycompositekey",
                            "input": {
                                "keyName": "account",
                                "usePagination": false,
                                "pageSize": 0,
                                "start": "",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.Transaction",
                                "privateCollection": "=$activity[BankConfig].txnCollection",
                                "attributes": {
                                    "mapping": {
                                        "account": "=$flow.parameters.name"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "attributes": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"account\":{\"type\":\"string\"}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"account\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true}]"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GET by account composite key: \", $activity[GetByCompositeKey].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[GetByCompositeKey].code",
                                    "message": "=$activity[GetByCompositeKey].message",
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[GetByCompositeKey].result,index)": {
                                                "key": "=$loop.key",
                                                "value": "=$loop.value"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction7\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"bank\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"iouRef\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:getIOUHistory",
            "data": {
                "name": "getIOUHistory",
                "description": "retrieves history of an IOU",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "GetHistory",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "GetHistory",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[getIOUHistory] \", $flow.parameters.id)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "GetHistory",
                        "name": "GetHistory",
                        "description": "",
                        "activity": {
                            "ref": "#gethistory",
                            "input": {
                                "key": "=$flow.parameters.id",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU"
                            },
                            "schemas": {
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"isDeleted\":{\"type\":\"boolean\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"txID\": \"\",\n    \"txTime\": \"\",\n    \"isDeleted\": false,\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"GetHistory: \", $activity[GetHistory].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[GetHistory].code",
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[GetHistory].result,index)": {
                                                "txID": "=$loop.txID",
                                                "txTime": "=$loop.txTime",
                                                "isDeleted": "=$loop.isDeleted",
                                                "value": "=$loop.value"
                                            }
                                        }
                                    },
                                    "message": "=$activity[GetHistory].message"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"isDeleted\":{\"type\":\"boolean\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction8\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"txID\":{\"type\":\"string\"},\"txTime\":{\"type\":\"string\"},\"isDeleted\":{\"type\":\"boolean\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:queryIOUByAmount",
            "data": {
                "name": "queryIOUByAmount",
                "description": "find an IOU matching issuer, owner, and amount",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "Query",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Query",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[queryIOUByAmount] issuer: \", $flow.parameters.issuer, \" owner: \", $flow.parameters.owner, \" amount: \", coerce.toString($flow.parameters.amount))",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Query",
                        "name": "Query",
                        "description": "",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "query": "{\n    \"selector\": {\n        \"issuer\": \"$issuer\",\n        \"owner\": \"$owner\",\n        \"amount\": \"$amount\"\n    }\n}",
                                "usePagination": false,
                                "pageSize": 0,
                                "start": "",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "queryParams": {
                                    "mapping": {
                                        "issuer": "=$flow.parameters.issuer",
                                        "owner": "=$flow.parameters.owner",
                                        "amount": "=$flow.parameters.amount"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "queryParams": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"issuer\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true},{\"parameterName\":\"owner\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true},{\"parameterName\":\"amount\",\"type\":\"number\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true}]"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"QUERY: \", $activity[Query].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[Query].code",
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[Query].result,index)": {
                                                "key": "=$loop.key",
                                                "value": "=$loop.value"
                                            }
                                        }
                                    },
                                    "message": "=$activity[Query].message"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"issuer\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction9\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:send",
            "data": {
                "name": "send",
                "description": "create or find IOU equivalent to specified amount in the currency of a receiver bank, returns the IOU owned by the sender.",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "SenderBankConfig",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "SenderBankConfig",
                        "to": "IssueIOU",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$flow.parameters.senderBank == $flow.parameters.receiverBank"
                    },
                    {
                        "id": 3,
                        "from": "IssueIOU",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "SenderBankConfig",
                        "to": "SearchIOU",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$flow.parameters.senderBank != $flow.parameters.receiverBank"
                    },
                    {
                        "id": 6,
                        "from": "SearchIOU",
                        "to": "Log3",
                        "type": "default"
                    },
                    {
                        "id": 7,
                        "from": "Log3",
                        "to": "IssueSenderIOU",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[SearchIOU].status != 200"
                    },
                    {
                        "id": 8,
                        "from": "IssueSenderIOU",
                        "to": "Log4",
                        "type": "default"
                    },
                    {
                        "id": 9,
                        "from": "Log4",
                        "to": "Return1",
                        "type": "default"
                    },
                    {
                        "id": 10,
                        "from": "Log3",
                        "to": "BuyIOU",
                        "type": "expression",
                        "label": "newtask",
                        "value": "$activity[SearchIOU].status == 200"
                    },
                    {
                        "id": 11,
                        "from": "BuyIOU",
                        "to": "Log7",
                        "type": "default"
                    },
                    {
                        "id": 12,
                        "from": "Log7",
                        "to": "Return2",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[send] amount \", coerce.toString($flow.parameters.amount), \" from \", $flow.parameters.sender, \" bank \", $flow.parameters.senderBank, \" receiver bank: \", $flow.parameters.receiverBank)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "SenderBankConfig",
                        "name": "SenderBankConfig",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:bankConfig"
                            },
                            "input": {
                                "bank": "=$flow.parameters.senderBank"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"bank\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"currency\":{\"type\":\"string\"},\"acctCollection\":{\"type\":\"string\"},\"txnCollection\":{\"type\":\"string\"},\"exchangeRate\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"currency\": \"\",\n    \"acctCollection\": \"\",\n    \"txnCollection\": \"\",\n    \"exchangeRate\": 0\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "IssueIOU",
                        "name": "IssueIOU",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:issue"
                            },
                            "input": {
                                "parameters": {
                                    "mapping": {
                                        "bank": "=$flow.parameters.senderBank",
                                        "owner": "=$flow.parameters.sender",
                                        "amount": "=$flow.parameters.amount"
                                    }
                                },
                                "txID": "=$flow.txID",
                                "txTime": "=$flow.txTime"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"Issue IOU: \", $activity[IssueIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[IssueIOU].status",
                                    "message": "=$activity[IssueIOU].message",
                                    "returns": "=$activity[IssueIOU].returns"
                                }
                            }
                        }
                    },
                    {
                        "id": "SearchIOU",
                        "name": "SearchIOU",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:queryIOUByAmount"
                            },
                            "input": {
                                "parameters": {
                                    "mapping": {
                                        "issuer": "=$flow.parameters.receiverBank",
                                        "owner": "=$flow.parameters.senderBank",
                                        "amount": "=$flow.parameters.amount"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"FabricTransaction9\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"FabricTransaction9\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}},\"required\":[]}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log3",
                        "name": "Log3",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"Search IOU: \", $activity[SearchIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "IssueSenderIOU",
                        "name": "IssueSenderIOU",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:issue"
                            },
                            "input": {
                                "parameters": {
                                    "mapping": {
                                        "bank": "=$flow.parameters.senderBank",
                                        "owner": "=$flow.parameters.sender",
                                        "amount": "=float.float64($flow.parameters.amount*$activity[SenderBankConfig].exchangeRate, 2)"
                                    }
                                },
                                "txID": "=$flow.txID",
                                "txTime": "=$flow.txTime"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log4",
                        "name": "Log4",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"IssueSenderIOU: \", $activity[IssueSenderIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return1",
                        "name": "Return1",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[IssueSenderIOU].status",
                                    "message": "=$activity[IssueSenderIOU].message",
                                    "returns": "=$activity[IssueSenderIOU].returns"
                                }
                            }
                        }
                    },
                    {
                        "id": "BuyIOU",
                        "name": "BuyIOU",
                        "description": "",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:buy"
                            },
                            "input": {
                                "parameters": {
                                    "mapping": {
                                        "bank": "=$flow.parameters.senderBank",
                                        "owner": "=$flow.parameters.sender",
                                        "iou": "=$activity[SearchIOU].returns[0].key"
                                    }
                                },
                                "txID": "=$flow.txID",
                                "txTime": "=$flow.txTime"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"iou\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"bank\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"},\"iou\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}",
                                        "fe_metadata": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log7",
                        "name": "Log7",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"BuyIOU: \", $activity[BuyIOU].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return2",
                        "name": "Return2",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[BuyIOU].status",
                                    "returns": "=$activity[BuyIOU].returns",
                                    "message": "=$activity[BuyIOU].message"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"sender\":{\"type\":\"string\"},\"senderBank\":{\"type\":\"string\"},\"receiverBank\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction11\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"sender\":{\"type\":\"string\"},\"senderBank\":{\"type\":\"string\"},\"receiverBank\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:getIOUByIssuer",
            "data": {
                "name": "getIOUByIssuer",
                "description": "",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "GetByCompositeKey",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "GetByCompositeKey",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[getIOUByIssuer] \", $flow.parameters.issuer)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "GetByCompositeKey",
                        "name": "GetByCompositeKey",
                        "description": "",
                        "activity": {
                            "ref": "#getbycompositekey",
                            "input": {
                                "keyName": "issuer~id",
                                "usePagination": false,
                                "pageSize": 0,
                                "start": "",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "attributes": {
                                    "mapping": {
                                        "issuer": "=$flow.parameters.issuer"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "attributes": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"issuer\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true}]"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"QUERY: \", $activity[GetByCompositeKey].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[GetByCompositeKey].result,index)": {
                                                "value": "=$loop.value",
                                                "key": "=$loop.key"
                                            }
                                        }
                                    },
                                    "status": "=$activity[GetByCompositeKey].code",
                                    "message": "=$activity[GetByCompositeKey].message"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"issuer\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction1\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"issuer\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:getIOUByOwner",
            "data": {
                "name": "getIOUByOwner",
                "description": "",
                "links": [
                    {
                        "id": 1,
                        "from": "Log",
                        "to": "Query",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Query",
                        "to": "Log1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "Log1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "Log",
                        "name": "Log",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[getIOUByOwner] \", $flow.parameters.owner)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Query",
                        "name": "Query",
                        "description": "",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "query": "{\n    \"selector\": {\n        \"owner\": \"$owner\"\n    }\n}",
                                "usePagination": false,
                                "pageSize": 0,
                                "start": "",
                                "commonData": {
                                    "id": "dcea3920-0d4a-11ea-bd44-d5936a9802ca",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "iou_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU\",\"definition\":\"{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOU_KV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Account\",\"definition\":\"{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"Transaction\",\"definition\":\"{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"AccountKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"name\\\":\\\"\\\",\\\"bank\\\":\\\"\\\",\\\"balance\\\":0,\\\"currency\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"TransactionKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"account\\\":\\\"\\\",\\\"amount\\\":0,\\\"iouRef\\\":\\\"\\\"}}]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iou\",\"name\":\"IOUHistory\",\"definition\":\"[{\\\"txID\\\":\\\"\\\",\\\"txTime\\\":\\\"\\\",\\\"isDeleted\\\":false,\\\"value\\\":{\\\"id\\\":\\\"\\\",\\\"issuer\\\":\\\"\\\",\\\"amount\\\":0,\\\"currency\\\":\\\"\\\",\\\"issueDate\\\":\\\"\\\",\\\"owner\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issuer~id\",\"value\":\"[\\\"issuer\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"iouKey\",\"name\":\"issueDate~id\",\"value\":\"[\\\"issueDate\\\",\\\"id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"accountKey\",\"name\":\"bank~name\",\"value\":\"[\\\"bank\\\",\\\"name\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"account\",\"value\":\"[\\\"account\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"transactionKey\",\"name\":\"iouRef\",\"value\":\"[\\\"iouRef\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iou\": {\n    \"IOU\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    },\n    \"IOU_KV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ],\n    \"Account\": {\n      \"name\": \"\",\n      \"bank\": \"\",\n      \"balance\": 0,\n      \"currency\": \"\"\n    },\n    \"Transaction\": {\n      \"txID\": \"\",\n      \"txTime\": \"\",\n      \"account\": \"\",\n      \"amount\": 0,\n      \"iouRef\": \"\"\n    },\n    \"AccountKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"name\": \"\",\n          \"bank\": \"\",\n          \"balance\": 0,\n          \"currency\": \"\"\n        }\n      }\n    ],\n    \"TransactionKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txID\": \"\",\n          \"txTime\": \"\",\n          \"account\": \"\",\n          \"amount\": 0,\n          \"iouRef\": \"\"\n        }\n      }\n    ],\n    \"IOUHistory\": [\n      {\n        \"txID\": \"\",\n        \"txTime\": \"\",\n        \"isDeleted\": false,\n        \"value\": {\n          \"id\": \"\",\n          \"issuer\": \"\",\n          \"amount\": 0,\n          \"currency\": \"\",\n          \"issueDate\": \"\",\n          \"owner\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"iouKey\": {\n    \"issuer~id\": [\n      \"issuer\",\n      \"id\"\n    ],\n    \"issueDate~id\": [\n      \"issueDate\",\n      \"id\"\n    ]\n  },\n  \"accountKey\": {\n    \"bank~name\": [\n      \"bank\",\n      \"name\"\n    ]\n  },\n  \"transactionKey\": {\n    \"account\": [\n      \"account\"\n    ],\n    \"iouRef\": [\n      \"iouRef\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "loopType": "none",
                                    "loopSettings": [],
                                    "retrySettings": [],
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "iteratorAccumulate": false,
                                    "isValid": true,
                                    "lastUpdatedTime": 1574442874299,
                                    "user": "flogo",
                                    "connectorName": "iou_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "iou.IOU",
                                "privateCollection": "",
                                "queryParams": {
                                    "mapping": {
                                        "owner": "=$flow.parameters.owner"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "queryParams": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"owner\":{\"type\":\"string\"}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"owner\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true}]"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"id\": \"\",\n      \"issuer\": \"\",\n      \"amount\": 0,\n      \"currency\": \"\",\n      \"issueDate\": \"\",\n      \"owner\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Log1",
                        "name": "Log1",
                        "description": "",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"QUERY: \", $activity[Query].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "status": "=$activity[Query].code",
                                    "message": "=$activity[Query].message",
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[Query].result,index)": {
                                                "key": "=$loop.key",
                                                "value": "=$loop.value"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"owner\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "status",
                            "type": "float64"
                        },
                        {
                            "name": "message",
                            "type": "string"
                        },
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction2\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"owner\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"status\":{\"type\":\"number\",\"required\":false},\"message\":{\"type\":\"string\",\"required\":false},\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"issuer\":{\"type\":\"string\"},\"amount\":{\"type\":\"number\"},\"currency\":{\"type\":\"string\"},\"issueDate\":{\"type\":\"string\"},\"owner\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        }
    ],
    "properties": [
        {
            "name": "collections.USDBankAccounts",
            "type": "string",
            "value": "USDBankAccounts"
        },
        {
            "name": "collections.EURBankAccounts",
            "type": "string",
            "value": "EURBankAccounts"
        },
        {
            "name": "currencies.USDBankCurrency",
            "type": "string",
            "value": "USD"
        },
        {
            "name": "currencies.EURBankCurrency",
            "type": "string",
            "value": "EUR"
        },
        {
            "name": "collections.USDBankTransactions",
            "type": "string",
            "value": "USDBankTransactions"
        },
        {
            "name": "collections.EURBankTransactions",
            "type": "string",
            "value": "EURBankTransactions"
        },
        {
            "name": "currencies.ExchangeRate",
            "type": "float64",
            "value": 1.1
        }
    ],
    "connections": {},
    "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS9USUJDT1NvZnR3YXJlL2RvdmV0YWlsLWNvbnRyaWIvaHlwZXJsZWRnZXItZmFicmljL2ZhYnJpYyIsInMzbG9jYXRpb24iOiJ7VVNFUklEfS9mYWJyaWMifSx7InJlZiI6ImdpdGh1Yi5jb20vcHJvamVjdC1mbG9nby9jb250cmliL2FjdGl2aXR5L2xvZyIsInMzbG9jYXRpb24iOiJ7VVNFUklEfS9EZWZhdWx0L2FjdGl2aXR5L2xvZyJ9LHsicmVmIjoiZ2l0aHViLmNvbS9wcm9qZWN0LWZsb2dvL2NvbnRyaWIvYWN0aXZpdHkvZXJyb3IiLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vRGVmYXVsdC9hY3Rpdml0eS9lcnJvciJ9XQ==",
    "fe_metadata": "UEsDBAoAAAAIAPmKdk+rqSRGFQAAABMAAAAIAAAAYXBwLmpzb26rViopykxPTy1yy8kvL1ayio6tBQBQSwECFAAKAAAACAD5inZPq6kkRhUAAAATAAAACAAAAAAAAAAAAAAAAAAAAAAAYXBwLmpzb25QSwUGAAAAAAEAAQA2AAAAOwAAAAAA"
}