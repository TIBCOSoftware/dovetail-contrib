{
    "imports": [
        "github.com/project-flogo/flow",
        "github.com/project-flogo/contrib/activity/log",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/put",
        "github.com/project-flogo/contrib/activity/actreturn",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/activity/putall",
        "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/trigger/transaction"
    ],
    "name": "fabric_contract",
    "description": " ",
    "version": "1.1.0",
    "type": "flogo:app",
    "appModel": "1.1.0",
    "feVersion": "2.6.0",
    "triggers": [
        {
            "ref": "#transaction",
            "name": "FabricTransaction1",
            "description": "Illustrate use of transient attributes that must be specified at creation time",
            "settings": {},
            "id": "FabricTransaction1",
            "handlers": [
                {
                    "description": "Illustrate use of transient attributes that must be specified at creation time",
                    "settings": {
                        "name": "put_record",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:Put_Record"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "transient": "=$.transient",
                            "txID": "=$.txID",
                            "txTime": "=$.txTime"
                        },
                        "output": {
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                            },
                            "transient": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"},\"pin\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\n    \"secret\": \"\",\n    \"pin\": 0\n}"
                            }
                        }
                    }
                },
                {
                    "description": "PutAll cannot get array position for key sequence, so this model supports only single record",
                    "settings": {
                        "name": "put_records",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:Put_Records"
                        },
                        "input": {
                            "parameters": {
                                "mapping": {
                                    "records": {
                                        "@foreach($.parameters.records)": {
                                            "user_txn_id": "=$.user_txn_id",
                                            "data": "=$.data",
                                            "hash_type": "=$.hash_type",
                                            "hash_value": "=$.hash_value"
                                        }
                                    }
                                }
                            },
                            "txID": "=$.txID",
                            "txTime": "=$.txTime"
                        },
                        "output": {
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns)": {
                                        "key": "=$.key",
                                        "value": "=$.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "{\n  \"records\": [\n    {\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    }\n  ]\n}"
                            }
                        }
                    }
                },
                {
                    "description": "illustrate that transient attribute on trigger cannot be added after creation",
                    "settings": {
                        "name": "put_record_2",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:Put_Record_2"
                        },
                        "input": {
                            "parameters": "=$.parameters",
                            "txID": "=$.txID",
                            "txTime": "=$.txTime"
                        },
                        "output": {
                            "returns": "=$.returns"
                        }
                    },
                    "reply": {
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                            }
                        }
                    }
                },
                {
                    "description": "Cannot return all Put results, so returned only the last available Put record",
                    "settings": {
                        "name": "put_records_2",
                        "commonData": "",
                        "validation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:Put_Records_2"
                        },
                        "input": {
                            "txID": "=$.txID",
                            "txTime": "=$.txTime",
                            "parameters": {
                                "mapping": {
                                    "records": {
                                        "@foreach($.parameters.records)": {
                                            "user_txn_id": "=$.user_txn_id",
                                            "data": "=$.data",
                                            "hash_type": "=$.hash_type",
                                            "hash_value": "=$.hash_value"
                                        }
                                    }
                                }
                            }
                        },
                        "output": {
                            "returns": {
                                "mapping": {
                                    "@foreach($.returns)": {
                                        "key": "=$.key",
                                        "value": "=$.value"
                                    }
                                }
                            }
                        }
                    },
                    "reply": {
                        "returnsDataType": ""
                    },
                    "schemas": {
                        "reply": {
                            "returns": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    }\n  }\n]"
                            }
                        },
                        "output": {
                            "parameters": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}",
                                "fe_metadata": "{\n  \"records\": [\n    {\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    }\n  ]\n}"
                            }
                        }
                    }
                }
            ]
        }
    ],
    "resources": [
        {
            "id": "flow:Put_Record",
            "data": {
                "name": "Put Record",
                "description": "Illustrate use of transient attributes that must be specified at creation time",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "Put",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Put",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[put_record] \", $flow.parameters.user_txn_id, \" secret: \", $flow.transient.secret)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Put",
                        "name": "Put",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.txTime, \":0\")",
                                "commonData": {
                                    "id": "45094b80-9d12-11e9-ad3e-dfb8cac521b0",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "audit_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLog\",\"definition\":\"{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditRecord\",\"definition\":\"{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLogList\",\"definition\":\"{\\\"records\\\":[{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}]}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"user_txn_id\",\"value\":\"[\\\"user_txn_id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"hash_value\",\"value\":\"[\\\"hash_value\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"audit\": {\n    \"AuditLog\": {\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditRecord\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditLogList\": {\n      \"records\": [\n        {\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      ]\n    },\n    \"AuditKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txn_id\": \"\",\n          \"txn_time\": \"\",\n          \"sequence\": 0,\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"compositekey\": {\n    \"user_txn_id\": [\n      \"user_txn_id\"\n    ],\n    \"hash_value\": [\n      \"hash_value\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "isValid": true,
                                    "lastUpdatedTime": 1562103807238,
                                    "user": "flogo",
                                    "connectorName": "audit_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "audit.AuditRecord",
                                "isPrivate": false,
                                "collection": "",
                                "keyType": "compositekey",
                                "compositeKeys": "{\n  \"user_txn_id\": [\n    \"user_txn_id\"\n  ],\n  \"hash_value\": [\n    \"hash_value\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "user_txn_id": "=$flow.parameters.user_txn_id",
                                        "data": "=$flow.parameters.data",
                                        "hash_type": "=$flow.parameters.hash_type",
                                        "hash_value": "=$flow.parameters.hash_value",
                                        "txn_id": "=$flow.txID",
                                        "txn_time": "=$flow.txTime",
                                        "sequence": 0
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "returns": "=$activity[Put].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "transient",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"secret\":{\"type\":\"string\"},\"pin\":{\"type\":\"number\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}},\"transient\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"},\"pin\":{\"type\":\"number\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:Put_Records",
            "data": {
                "name": "Put Records",
                "description": "PutAll cannot get array position for key sequence, so this model supports only single record",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "PutAll",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "PutAll",
                        "to": "LogMessage1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "LogMessage1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[put_records] \", $flow.parameters.records[0].user_txn_id)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "PutAll",
                        "name": "PutAll",
                        "activity": {
                            "ref": "#putall",
                            "input": {
                                "commonData": {
                                    "id": "45094b80-9d12-11e9-ad3e-dfb8cac521b0",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "audit_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLog\",\"definition\":\"{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditRecord\",\"definition\":\"{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLogList\",\"definition\":\"{\\\"records\\\":[{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}]}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"user_txn_id\",\"value\":\"[\\\"user_txn_id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"hash_value\",\"value\":\"[\\\"hash_value\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"audit\": {\n    \"AuditLog\": {\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditRecord\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditLogList\": {\n      \"records\": [\n        {\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      ]\n    },\n    \"AuditKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txn_id\": \"\",\n          \"txn_time\": \"\",\n          \"sequence\": 0,\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"compositekey\": {\n    \"user_txn_id\": [\n      \"user_txn_id\"\n    ],\n    \"hash_value\": [\n      \"hash_value\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "isValid": true,
                                    "lastUpdatedTime": 1562103807238,
                                    "user": "flogo",
                                    "connectorName": "audit_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "audit.AuditRecord",
                                "isPrivate": false,
                                "collection": "",
                                "keyType": "compositekey",
                                "compositeKeys": "{\n  \"user_txn_id\": [\n    \"user_txn_id\"\n  ],\n  \"hash_value\": [\n    \"hash_value\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "@foreach($flow.parameters.records)": {
                                            "key": "=string.concat($flow.txID, \":\", $flow.txTime, \":0\")",
                                            "value": {
                                                "user_txn_id": "=$.user_txn_id",
                                                "data": "=$.data",
                                                "hash_type": "=$.hash_type",
                                                "hash_value": "=$.hash_value",
                                                "txn_id": "=$flow.txID",
                                                "txn_time": "=$flow.txTime"
                                            }
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    }\n  }\n]"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "[\n  {\n    \"key\": \"\",\n    \"value\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    }\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage1",
                        "name": "LogMessage1",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT_ALL: \", $activity[PutAll].message)"
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "returns": {
                                        "mapping": {
                                            "@foreach($activity[PutAll].result)": {
                                                "key": "=$.key",
                                                "value": "=$.value"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:Put_Record_2",
            "data": {
                "name": "Put Record 2",
                "description": "illustrate that transient attribute on trigger cannot be added after creation",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "Put",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Put",
                        "to": "LogMessage1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "LogMessage1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[put_record_2] \", $flow.parameters.user_txn_id)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Put",
                        "name": "Put",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, \":\", $flow.txTime, \":0\")",
                                "commonData": {
                                    "id": "45094b80-9d12-11e9-ad3e-dfb8cac521b0",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "audit_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLog\",\"definition\":\"{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditRecord\",\"definition\":\"{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLogList\",\"definition\":\"{\\\"records\\\":[{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}]}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"user_txn_id\",\"value\":\"[\\\"user_txn_id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"hash_value\",\"value\":\"[\\\"hash_value\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"audit\": {\n    \"AuditLog\": {\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditRecord\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditLogList\": {\n      \"records\": [\n        {\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      ]\n    },\n    \"AuditKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txn_id\": \"\",\n          \"txn_time\": \"\",\n          \"sequence\": 0,\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"compositekey\": {\n    \"user_txn_id\": [\n      \"user_txn_id\"\n    ],\n    \"hash_value\": [\n      \"hash_value\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "isValid": true,
                                    "lastUpdatedTime": 1562103807238,
                                    "user": "flogo",
                                    "connectorName": "audit_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "audit.AuditRecord",
                                "isPrivate": false,
                                "collection": "",
                                "keyType": "compositekey",
                                "compositeKeys": "{\n  \"user_txn_id\": [\n    \"user_txn_id\"\n  ],\n  \"hash_value\": [\n    \"hash_value\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txn_id": "=$flow.txID",
                                        "txn_time": "=$flow.txTime",
                                        "sequence": 0,
                                        "user_txn_id": "=$flow.parameters.user_txn_id",
                                        "data": "=$flow.parameters.data",
                                        "hash_type": "=$flow.parameters.hash_type",
                                        "hash_value": "=$flow.parameters.hash_value"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage1",
                        "name": "LogMessage1",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT: \", $activity[Put].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "returns": "=$activity[Put].result"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "returns",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                }
            }
        },
        {
            "id": "flow:Put_Records_2",
            "data": {
                "name": "Put Records 2",
                "description": "Cannot return all Put results, so returned only the last available Put record",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "Put",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Put",
                        "to": "LogMessage1",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "LogMessage1",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"[put_records_2] \", $flow.parameters.records[0].user_txn_id, \", count: \", string.tostring(array.count($flow.parameters.records)))",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Put",
                        "name": "Put",
                        "settings": {
                            "iterate": "=$flow.parameters.records"
                        },
                        "type": "iterator",
                        "activity": {
                            "ref": "#put",
                            "input": {
                                "key": "=string.concat($flow.txID, $flow.txTime, string.tostring($iteration.key))",
                                "commonData": {
                                    "id": "45094b80-9d12-11e9-ad3e-dfb8cac521b0",
                                    "type": "flogo:connector",
                                    "version": "1.0.0",
                                    "name": "fabric-datadef",
                                    "hashTags": [],
                                    "inputMappings": {},
                                    "outputMappings": {},
                                    "iteratorMappings": {},
                                    "title": "Fabric Data Definition",
                                    "description": "Fabric Data Definition",
                                    "ref": "github.com/TIBCOSoftware/dovetail-contrib/hyperledger-fabric/fabric/connector/datadef",
                                    "settings": [
                                        {
                                            "name": "name",
                                            "description": "Unique name of the data definition",
                                            "type": "string",
                                            "required": true,
                                            "display": {
                                                "name": "Name",
                                                "visible": true
                                            },
                                            "value": "audit_data"
                                        },
                                        {
                                            "name": "schemaList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Schema Definitions",
                                                "description": "Define shared data schema",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"definition\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLog\",\"definition\":\"{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditRecord\",\"definition\":\"{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditLogList\",\"definition\":\"{\\\"records\\\":[{\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}]}\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"audit\",\"name\":\"AuditKV\",\"definition\":\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":{\\\"txn_id\\\":\\\"\\\",\\\"txn_time\\\":\\\"\\\",\\\"sequence\\\":0,\\\"user_txn_id\\\":\\\"\\\",\\\"data\\\":\\\"\\\",\\\"hash_type\\\":\\\"\\\",\\\"hash_value\\\":\\\"\\\"}}]\"}]"
                                        },
                                        {
                                            "name": "dataList",
                                            "type": "array",
                                            "display": {
                                                "type": "table",
                                                "name": "Shared Data",
                                                "description": "Define shared data value",
                                                "schema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"package\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"object\"}}}}",
                                                "readonly": false,
                                                "valid": false,
                                                "visible": true
                                            },
                                            "value": "[{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"user_txn_id\",\"value\":\"[\\\"user_txn_id\\\"]\"},{\"parameterName\":\"\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"isEditable\":true,\"package\":\"compositekey\",\"name\":\"hash_value\",\"value\":\"[\\\"hash_value\\\"]\"}]"
                                        },
                                        {
                                            "name": "schema",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All schema definitions",
                                                "description": "Schema defined in schemaList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"audit\": {\n    \"AuditLog\": {\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditRecord\": {\n      \"txn_id\": \"\",\n      \"txn_time\": \"\",\n      \"sequence\": 0,\n      \"user_txn_id\": \"\",\n      \"data\": \"\",\n      \"hash_type\": \"\",\n      \"hash_value\": \"\"\n    },\n    \"AuditLogList\": {\n      \"records\": [\n        {\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      ]\n    },\n    \"AuditKV\": [\n      {\n        \"key\": \"\",\n        \"value\": {\n          \"txn_id\": \"\",\n          \"txn_time\": \"\",\n          \"sequence\": 0,\n          \"user_txn_id\": \"\",\n          \"data\": \"\",\n          \"hash_type\": \"\",\n          \"hash_value\": \"\"\n        }\n      }\n    ]\n  }\n}"
                                            }
                                        },
                                        {
                                            "name": "data",
                                            "type": "complex_object",
                                            "display": {
                                                "name": "All data definitions",
                                                "description": "Data values defined in dataList",
                                                "type": "texteditor",
                                                "syntax": "json",
                                                "readonly": true,
                                                "valid": true,
                                                "visible": true
                                            },
                                            "value": {
                                                "metadata": "",
                                                "value": "{\n  \"compositekey\": {\n    \"user_txn_id\": [\n      \"user_txn_id\"\n    ],\n    \"hash_value\": [\n      \"hash_value\"\n    ]\n  }\n}"
                                            }
                                        }
                                    ],
                                    "outputs": [],
                                    "inputs": [],
                                    "handler": {
                                        "settings": []
                                    },
                                    "reply": [],
                                    "s3Prefix": "flogo",
                                    "key": "flogo/fabric/connector/datadef/connector.json",
                                    "display": {
                                        "category": "fabric",
                                        "description": "Fabric Data Definition",
                                        "visible": true,
                                        "smallIcon": "ic-fabric@2x.png",
                                        "largeIcon": "ic-fabric@3x.png"
                                    },
                                    "actions": [
                                        {
                                            "name": "Save"
                                        }
                                    ],
                                    "feature": {},
                                    "propertyMap": {},
                                    "keyfield": "name",
                                    "isValid": true,
                                    "lastUpdatedTime": 1562103807238,
                                    "user": "flogo",
                                    "connectorName": "audit_data",
                                    "connectorDescription": " "
                                },
                                "dataType": "audit.AuditRecord",
                                "isPrivate": false,
                                "collection": "",
                                "keyType": "compositekey",
                                "compositeKeys": "{\n  \"user_txn_id\": [\n    \"user_txn_id\"\n  ],\n  \"hash_value\": [\n    \"hash_value\"\n  ]\n}",
                                "data": {
                                    "mapping": {
                                        "txn_id": "=$flow.txID",
                                        "txn_time": "=$flow.txTime",
                                        "sequence": "=number.int64($iteration.key)",
                                        "user_txn_id": "=$iteration.value.user_txn_id",
                                        "data": "=$iteration.value.data",
                                        "hash_type": "=$iteration.value.hash_type",
                                        "hash_value": "=$iteration.value.hash_value"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "result": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"txn_id\": \"\",\n  \"txn_time\": \"\",\n  \"sequence\": 0,\n  \"user_txn_id\": \"\",\n  \"data\": \"\",\n  \"hash_type\": \"\",\n  \"hash_value\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage1",
                        "name": "LogMessage1",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "message": "=string.concat(\"PUT: \", $activity[Put].message)",
                                "addDetails": false
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "returns": {
                                        "mapping": [
                                            {
                                                "key": "=$activity[Put].key",
                                                "value": "=$activity[Put].result"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "parameters",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}"
                            }
                        },
                        {
                            "name": "txID",
                            "type": "string"
                        },
                        {
                            "name": "txTime",
                            "type": "string"
                        }
                    ],
                    "output": [
                        {
                            "name": "returns",
                            "type": "array",
                            "schema": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"FabricTransaction\",\"properties\":{\"parameters\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}},\"txID\":{\"type\":\"string\",\"required\":false},\"txTime\":{\"type\":\"string\",\"required\":false}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"returns\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"object\",\"properties\":{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"sequence\":{\"type\":\"number\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}}}}},\"required\":[]}"
                    }
                }
            }
        }
    ],
    "properties": [],
    "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS9wcm9qZWN0LWZsb2dvL2NvbnRyaWIvYWN0aXZpdHkvbG9nIiwiczNsb2NhdGlvbiI6IntVU0VSSUR9L0RlZmF1bHQvYWN0aXZpdHkvbG9nIn0seyJyZWYiOiJnaXRodWIuY29tL1RJQkNPU29mdHdhcmUvZG92ZXRhaWwtY29udHJpYi9oeXBlcmxlZGdlci1mYWJyaWMvZmFicmljIiwiczNsb2NhdGlvbiI6IntVU0VSSUR9L2ZhYnJpYyJ9XQ==",
    "fe_metadata": "UEsDBAoAAAAIAD0f406rqSRGFQAAABMAAAAIAAAAYXBwLmpzb26rViopykxPTy1yy8kvL1ayio6tBQBQSwECFAAKAAAACAA9H+NOq6kkRhUAAAATAAAACAAAAAAAAAAAAAAAAAAAAAAAYXBwLmpzb25QSwUGAAAAAAEAAQA2AAAAOwAAAAAA"
}